{"version":3,"file":"default-src_app_shared_comcol_comcol-forms_edit-comcol-page_comcol-metadata_comcol-metadata_c-ddac2e.js","mappings":"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","sources":["./src/app/core/shared/hal-link.model.ts","./src/app/shared/comcol/comcol-forms/edit-comcol-page/comcol-metadata/comcol-metadata.component.ts","./src/app/shared/comcol/comcol-forms/edit-comcol-page/comcol-role/comcol-role.component.ts","./src/app/shared/comcol/comcol-forms/edit-comcol-page/comcol-role/comcol-role.component.html","./src/app/shared/comcol/comcol-forms/edit-comcol-page/edit-comcol-page.component.ts","./src/app/shared/utils/has-no-value.pipe.ts"],"sourcesContent":["/**\n * A single link in the _links section of a {@link HALResource}\n */\nexport class HALLink {\n\n  /**\n   * The url of the {@link HALLink}'s target\n   */\n  href: string;\n\n  /**\n   * The name of the {@link HALLink}\n   */\n  name?: string;\n\n  /**\n   * A boolean indicating whether the href contains a template.\n   *\n   * e.g. if href is \"http://haltalk.herokuapp.com/docs/{rel}\"\n   * {rel} would be the template\n   */\n  templated?: boolean;\n}\n","import {\n  Component,\n  OnInit,\n} from '@angular/core';\nimport {\n  ActivatedRoute,\n  Router,\n} from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport {\n  map,\n  take,\n} from 'rxjs/operators';\n\nimport { ComColDataService } from '../../../../../core/data/comcol-data.service';\nimport { RemoteData } from '../../../../../core/data/remote-data';\nimport { Collection } from '../../../../../core/shared/collection.model';\nimport { Community } from '../../../../../core/shared/community.model';\nimport { DSpaceObject } from '../../../../../core/shared/dspace-object.model';\nimport {\n  getFirstCompletedRemoteData,\n  getFirstSucceededRemoteData,\n} from '../../../../../core/shared/operators';\nimport { ResourceType } from '../../../../../core/shared/resource-type';\nimport { isEmpty } from '../../../../empty.util';\nimport { NotificationsService } from '../../../../notifications/notifications.service';\n\n@Component({\n  selector: 'ds-comcol-metadata',\n  template: '',\n  standalone: true,\n})\nexport class ComcolMetadataComponent<TDomain extends Community | Collection> implements OnInit {\n  /**\n   * The initial DSO object\n   */\n  public dsoRD$: Observable<RemoteData<TDomain>>;\n  /**\n   * Frontend endpoint for this type of DSO\n   */\n  protected frontendURL: string;\n  /**\n   * The type of the dso\n   */\n  protected type: ResourceType;\n\n  public constructor(\n    protected dsoDataService: ComColDataService<TDomain>,\n    protected router: Router,\n    protected route: ActivatedRoute,\n    protected notificationsService: NotificationsService,\n    protected translate: TranslateService,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.dsoRD$ = this.route.parent.data.pipe(map((data) => data.dso));\n  }\n\n  /**\n   * Updates an existing DSO based on the submitted user data and navigates to the edited object's home page\n   * @param event   The event returned by the community/collection form. Contains the new dso and logo uploader\n   */\n  onSubmit(event) {\n    if (!isEmpty(event.operations)) {\n      this.dsoDataService.patch(event.dso, event.operations).pipe(getFirstCompletedRemoteData())\n        .subscribe( (response: RemoteData<DSpaceObject>) => {\n          if (response.hasSucceeded) {\n            this.router.navigate([this.frontendURL, event.dso.uuid]);  // todo: ok not to await this?\n            this.notificationsService.success(null, this.translate.get(`${this.type.value}.edit.notifications.success`));\n          } else if (response.statusCode === 403) {\n            this.notificationsService.error(null, this.translate.get(`${this.type.value}.edit.notifications.unauthorized`));\n          } else {\n            this.notificationsService.error(null, this.translate.get(`${this.type.value}.edit.notifications.error`));\n          }\n        });\n    } else {\n      this.router.navigate([this.frontendURL, event.dso.uuid]);\n    }\n  }\n\n  /**\n   * Navigate to the relative DSO page\n   */\n  navigateToHomePage() {\n    this.dsoRD$.pipe(\n      getFirstSucceededRemoteData(),\n      take(1),\n    ).subscribe((dsoRD: RemoteData<TDomain>) => {\n      this.router.navigate([this.frontendURL + dsoRD.payload.id]);\n    });\n  }\n}\n","import {\n  AsyncPipe,\n  NgIf,\n} from '@angular/common';\nimport {\n  Component,\n  Input,\n  OnInit,\n} from '@angular/core';\nimport { RouterLink } from '@angular/router';\nimport {\n  TranslateModule,\n  TranslateService,\n} from '@ngx-translate/core';\nimport {\n  BehaviorSubject,\n  Observable,\n} from 'rxjs';\nimport {\n  filter,\n  map,\n  switchMap,\n} from 'rxjs/operators';\n\nimport { getGroupEditRoute } from '../../../../../access-control/access-control-routing-paths';\nimport { DSONameService } from '../../../../../core/breadcrumbs/dso-name.service';\nimport { RemoteData } from '../../../../../core/data/remote-data';\nimport { RequestService } from '../../../../../core/data/request.service';\nimport { GroupDataService } from '../../../../../core/eperson/group-data.service';\nimport { Group } from '../../../../../core/eperson/models/group.model';\nimport { Collection } from '../../../../../core/shared/collection.model';\nimport { Community } from '../../../../../core/shared/community.model';\nimport { HALLink } from '../../../../../core/shared/hal-link.model';\nimport { NoContent } from '../../../../../core/shared/NoContent.model';\nimport {\n  getAllCompletedRemoteData,\n  getFirstCompletedRemoteData,\n} from '../../../../../core/shared/operators';\nimport { AlertComponent } from '../../../../alert/alert.component';\nimport {\n  hasNoValue,\n  hasValue,\n} from '../../../../empty.util';\nimport { ThemedLoadingComponent } from '../../../../loading/themed-loading.component';\nimport { NotificationsService } from '../../../../notifications/notifications.service';\nimport { HasNoValuePipe } from '../../../../utils/has-no-value.pipe';\nimport { VarDirective } from '../../../../utils/var.directive';\n\n/**\n * Component for managing a community or collection role.\n */\n@Component({\n  selector: 'ds-comcol-role',\n  styleUrls: ['./comcol-role.component.scss'],\n  templateUrl: './comcol-role.component.html',\n  imports: [\n    ThemedLoadingComponent,\n    AlertComponent,\n    AsyncPipe,\n    TranslateModule,\n    NgIf,\n    RouterLink,\n    VarDirective,\n    HasNoValuePipe,\n  ],\n  standalone: true,\n})\nexport class ComcolRoleComponent implements OnInit {\n\n  /**\n   * The community or collection to manage.\n   */\n  @Input()\n  dso: Community | Collection;\n\n  /**\n   * The role to manage\n   */\n  comcolRole$: BehaviorSubject<HALLink> = new BehaviorSubject(undefined);\n\n  /**\n   * The group for this role, as an observable remote data.\n   */\n  groupRD$: Observable<RemoteData<Group>>;\n\n  /**\n   * The group for this role, as an observable.\n   */\n  group$: Observable<Group>;\n\n  /**\n   * The link to the group edit page as an observable.\n   */\n  editGroupLink$: Observable<string>;\n\n  /**\n   * True if there is no group for this ComcolRole.\n   */\n  hasNoGroup$: Observable<boolean>;\n\n  /**\n   * Return true if the group for this ComcolRole is the Anonymous group, as an observable.\n   */\n  hasAnonymousGroup$: Observable<boolean>;\n\n  /**\n   * Return true if there is a group for this ComcolRole other than the Anonymous group, as an observable.\n   */\n  hasCustomGroup$: Observable<boolean>;\n\n  /**\n   * The human-readable name of this role\n   */\n  roleName$: Observable<string>;\n\n  constructor(\n    protected requestService: RequestService,\n    protected groupService: GroupDataService,\n    protected notificationsService: NotificationsService,\n    protected translateService: TranslateService,\n    public dsoNameService: DSONameService,\n  ) {\n  }\n\n  /**\n   * The link to the related group.\n   */\n  get groupLink(): string {\n    return this.comcolRole.href;\n  }\n\n  /**\n   * The role to manage\n   */\n  @Input()\n  set comcolRole(newRole: HALLink) {\n    this.comcolRole$.next(newRole);\n  }\n\n  get comcolRole(): HALLink {\n    return this.comcolRole$.getValue();\n  }\n\n  /**\n   * Create a group for this community or collection role.\n   */\n  create() {\n    this.groupService.createComcolGroup(this.dso, this.comcolRole.name, this.groupLink).pipe(\n      getFirstCompletedRemoteData(),\n    ).subscribe((rd: RemoteData<Group>) => {\n\n      if (rd.hasSucceeded) {\n        this.groupService.clearGroupsRequests();\n        this.requestService.setStaleByHrefSubstring(this.comcolRole.href);\n      } else {\n        this.notificationsService.error(\n          this.roleName$.pipe(\n            switchMap(role => this.translateService.get('comcol-role.edit.create.error.title', { role })),\n          ),\n          `${rd.statusCode} ${rd.errorMessage}`,\n        );\n      }\n    });\n  }\n\n  /**\n   * Delete the group for this community or collection role.\n   */\n  delete() {\n    this.groupService.deleteComcolGroup(this.groupLink).pipe(\n      getFirstCompletedRemoteData(),\n    ).subscribe((rd: RemoteData<NoContent>) => {\n      if (rd.hasSucceeded) {\n        this.groupService.clearGroupsRequests();\n        this.requestService.setStaleByHrefSubstring(this.comcolRole.href);\n      } else {\n        this.notificationsService.error(\n          this.roleName$.pipe(\n            switchMap(role => this.translateService.get('comcol-role.edit.delete.error.title', { role })),\n          ),\n          rd.errorMessage,\n        );\n      }\n    });\n  }\n\n  ngOnInit(): void {\n    this.groupRD$ = this.comcolRole$.pipe(\n      filter((role: HALLink) => hasValue(role)),\n      switchMap((role: HALLink) => this.groupService.findByHref(role.href)),\n      getAllCompletedRemoteData(),\n    );\n\n    this.group$ = this.groupRD$.pipe(\n      map((rd: RemoteData<Group>) => {\n        if (hasValue(rd.payload)) {\n          return rd.payload;\n        } else {\n          return undefined;\n        }\n      }),\n    );\n\n    this.editGroupLink$ = this.group$.pipe(\n      map((group: Group) => hasValue(group) ? getGroupEditRoute(group.id) : undefined),\n    );\n\n    this.hasNoGroup$ = this.group$.pipe(\n      map((group: Group) => hasNoValue(group)),\n    );\n\n    this.hasAnonymousGroup$ = this.group$.pipe(\n      map((group: Group) => hasValue(group) && group.name === 'Anonymous'),\n    );\n\n    this.hasCustomGroup$ = this.group$.pipe(\n      map((group: Group) => hasValue(group) && group.name !== 'Anonymous'),\n    );\n\n    this.roleName$ = this.translateService.get(`comcol-role.edit.${this.comcolRole.name}.name`);\n  }\n}\n","<div class=\"card p-2 m-3 {{(comcolRole$ | async)?.name}}\">\n\n  <div class=\"card-body d-flex flex-column\"\n       *ngVar=\"group$ | async as group\">\n\n    <h2 class=\"h4 w-100\">\n      {{ roleName$ | async }}\n    </h2>\n\n    <div class=\"mt-2 mb-2\">\n      <ds-alert [type]=\"'alert-info'\" >{{'comcol-role.edit.' + (comcolRole$ | async)?.name + '.description' | translate}}</ds-alert>\n    </div>\n\n    <div class=\"d-flex flex-md-row justify-content-between flex-column\">\n      <div class=\"w-100 d-flex align-items-center\">\n        <ds-loading *ngIf=\"groupRD$ | async | dsHasNoValue\"></ds-loading>\n        <div *ngIf=\"hasNoGroup$ | async\">\n          {{'comcol-role.edit.no-group' | translate}}\n        </div>\n        <div *ngIf=\"hasAnonymousGroup$ | async\">\n          {{'comcol-role.edit.' + (comcolRole$ | async)?.name + '.anonymous-group' | translate}}\n        </div>\n        <a *ngIf=\"hasCustomGroup$ | async\" [routerLink]=\"editGroupLink$ | async\">\n          {{ dsoNameService.getName(group) }}\n        </a>\n      </div>\n\n      <div class=\"flex-shrink-0\">\n        <button *ngIf=\"hasNoGroup$ | async\"\n             class=\"btn btn-primary create\"\n             (click)=\"create()\">\n          <i class=\"fas fa-plus\" aria-hidden=\"true\"></i> {{'comcol-role.edit.create' | translate}}\n        </button>\n        <button *ngIf=\"hasAnonymousGroup$ | async\"\n             class=\"btn btn-primary restrict\"\n             (click)=\"create()\">\n          {{'comcol-role.edit.restrict' | translate}}\n        </button>\n        <button *ngIf=\"hasCustomGroup$ | async\"\n             class=\"btn btn-danger delete\"\n             (click)=\"delete()\">\n          <i class=\"fas fa-trash\" aria-hidden=\"true\"></i> {{'comcol-role.edit.delete' | translate}}\n        </button>\n      </div>\n\n    </div>\n\n\n  </div>\n\n</div>\n","import {\n  Component,\n  OnInit,\n} from '@angular/core';\nimport {\n  ActivatedRoute,\n  Router,\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { RemoteData } from '../../../../core/data/remote-data';\nimport { DSpaceObject } from '../../../../core/shared/dspace-object.model';\nimport { isNotEmpty } from '../../../empty.util';\n\n/**\n * Component representing the edit page for communities and collections\n */\n@Component({\n  selector: 'ds-edit-comcol',\n  template: '',\n  standalone: true,\n})\nexport class EditComColPageComponent<TDomain extends DSpaceObject> implements OnInit {\n  /**\n   * The type of DSpaceObject (used to create i18n messages)\n   */\n  public type: string;\n\n  /**\n   * The current page outlet string\n   */\n  public currentPage: string;\n\n  /**\n   * All possible page outlet strings\n   */\n  public pages: string[];\n\n  /**\n   * The DSO to render the edit page for\n   */\n  public dsoRD$: Observable<RemoteData<TDomain>>;\n\n  /**\n   * Hide the default return button?\n   */\n  public hideReturnButton: boolean;\n\n  public constructor(\n    protected router: Router,\n    protected route: ActivatedRoute,\n  ) {\n    this.router.events.subscribe(() => this.initPageParamsByRoute());\n  }\n\n  ngOnInit(): void {\n    this.initPageParamsByRoute();\n    this.pages = this.route.routeConfig.children\n      .map((child: any) => child.path)\n      .filter((path: string) => isNotEmpty(path)); // ignore reroutes\n    this.dsoRD$ = this.route.data.pipe(map((data) => data.dso));\n  }\n\n  /**\n   * Get the dso's page url\n   * This method is expected to be overridden in the edit community/collection page components\n   * @param dso The DSpaceObject for which the url is requested\n   */\n  getPageUrl(dso: TDomain): string {\n    return this.router.url;\n  }\n\n  /**\n   * Set page params depending on the route\n   */\n  initPageParamsByRoute() {\n    this.currentPage = this.route.snapshot.firstChild.routeConfig.path;\n    this.hideReturnButton = this.route.routeConfig.children\n      .find((child: any) => child.path === this.currentPage).data.hideReturnButton;\n  }\n}\n","import {\n  Pipe,\n  PipeTransform,\n} from '@angular/core';\n\nimport { hasNoValue } from '../empty.util';\n\n/**\n * Returns true if the passed value is null or undefined.\n */\n@Pipe({ standalone: true, name: 'dsHasNoValue' })\nexport class HasNoValuePipe implements PipeTransform {\n  transform(value: any): boolean {\n    return hasNoValue(value);\n  }\n}\n"],"names":["HALLink","ActivatedRoute","Router","TranslateService","map","take","ComColDataService","getFirstCompletedRemoteData","getFirstSucceededRemoteData","isEmpty","NotificationsService","ComcolMetadataComponent","constructor","dsoDataService","router","route","notificationsService","translate","ngOnInit","dsoRD$","parent","data","pipe","dso","onSubmit","event","operations","patch","subscribe","response","hasSucceeded","navigate","frontendURL","uuid","success","get","type","value","statusCode","error","navigateToHomePage","dsoRD","payload","id","i0","ɵɵdirectiveInject","i1","i2","i3","i4","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","template","ComcolMetadataComponent_Template","rf","ctx","encapsulation","AsyncPipe","NgIf","RouterLink","TranslateModule","BehaviorSubject","filter","switchMap","getGroupEditRoute","DSONameService","RequestService","GroupDataService","getAllCompletedRemoteData","AlertComponent","hasNoValue","hasValue","ThemedLoadingComponent","HasNoValuePipe","VarDirective","ɵɵelement","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","tmp_3_0","ctx_r0","comcolRole$","name","ɵɵproperty","editGroupLink$","dsoNameService","getName","group_r2","ɵɵlistener","ComcolRoleComponent_div_2_button_21_Template_button_click_0_listener","ɵɵrestoreView","_r3","ɵɵnextContext","ɵɵresetView","create","ComcolRoleComponent_div_2_button_23_Template_button_click_0_listener","_r4","ComcolRoleComponent_div_2_button_25_Template_button_click_0_listener","_r5","delete","ɵɵtemplate","ComcolRoleComponent_div_2_ds_loading_11_Template","ComcolRoleComponent_div_2_div_14_Template","ComcolRoleComponent_div_2_div_16_Template","ComcolRoleComponent_div_2_a_18_Template","ComcolRoleComponent_div_2_button_21_Template","ComcolRoleComponent_div_2_button_23_Template","ComcolRoleComponent_div_2_button_25_Template","roleName$","ɵɵtextInterpolate","tmp_4_0","groupRD$","hasNoGroup$","hasAnonymousGroup$","hasCustomGroup$","ComcolRoleComponent","requestService","groupService","translateService","undefined","groupLink","comcolRole","href","newRole","next","getValue","createComcolGroup","rd","clearGroupsRequests","setStaleByHrefSubstring","role","errorMessage","deleteComcolGroup","findByHref","group$","group","i5","inputs","consts","ComcolRoleComponent_Template","ComcolRoleComponent_div_2_Template","ɵɵclassMapInterpolate1","tmp_0_0","TranslatePipe","styles","isNotEmpty","EditComColPageComponent","events","initPageParamsByRoute","pages","routeConfig","children","child","path","getPageUrl","url","currentPage","snapshot","firstChild","hideReturnButton","find","EditComColPageComponent_Template","transform","pure"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}