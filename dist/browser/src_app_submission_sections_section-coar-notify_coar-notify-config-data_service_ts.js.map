{"version":3,"file":"src_app_submission_sections_section-coar-notify_coar-notify-config-data_service_ts.js","mappings":"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","sources":["./src/app/submission/sections/section-coar-notify/coar-notify-config-data.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Operation } from 'fast-json-patch';\nimport { Observable } from 'rxjs';\nimport {\n  map,\n  take,\n} from 'rxjs/operators';\n\nimport { RemoteDataBuildService } from '../../../core/cache/builders/remote-data-build.service';\nimport { RequestParam } from '../../../core/cache/models/request-param.model';\nimport { ObjectCacheService } from '../../../core/cache/object-cache.service';\nimport {\n  CreateData,\n  CreateDataImpl,\n} from '../../../core/data/base/create-data';\nimport {\n  DeleteData,\n  DeleteDataImpl,\n} from '../../../core/data/base/delete-data';\nimport {\n  FindAllData,\n  FindAllDataImpl,\n} from '../../../core/data/base/find-all-data';\nimport { IdentifiableDataService } from '../../../core/data/base/identifiable-data.service';\nimport {\n  PatchData,\n  PatchDataImpl,\n} from '../../../core/data/base/patch-data';\nimport { ChangeAnalyzer } from '../../../core/data/change-analyzer';\nimport { FindListOptions } from '../../../core/data/find-list-options.model';\nimport { PaginatedList } from '../../../core/data/paginated-list.model';\nimport { RemoteData } from '../../../core/data/remote-data';\nimport { MultipartPostRequest } from '../../../core/data/request.models';\nimport { RequestService } from '../../../core/data/request.service';\nimport { RestRequest } from '../../../core/data/rest-request.model';\nimport { RestRequestMethod } from '../../../core/data/rest-request-method';\nimport { HALEndpointService } from '../../../core/shared/hal-endpoint.service';\nimport { NoContent } from '../../../core/shared/NoContent.model';\nimport { URLCombiner } from '../../../core/url-combiner/url-combiner';\nimport { NotificationsService } from '../../../shared/notifications/notifications.service';\nimport { FollowLinkConfig } from '../../../shared/utils/follow-link-config.model';\nimport { SubmissionCoarNotifyConfig } from './submission-coar-notify.config';\n\n\n/**\n * A service responsible for fetching/sending data from/to the REST API on the CoarNotifyConfig endpoint\n */\n@Injectable({ providedIn: 'root' })\nexport class CoarNotifyConfigDataService extends IdentifiableDataService<SubmissionCoarNotifyConfig> implements FindAllData<SubmissionCoarNotifyConfig>, DeleteData<SubmissionCoarNotifyConfig>, PatchData<SubmissionCoarNotifyConfig>, CreateData<SubmissionCoarNotifyConfig> {\n  createData: CreateDataImpl<SubmissionCoarNotifyConfig>;\n  private findAllData: FindAllDataImpl<SubmissionCoarNotifyConfig>;\n  private deleteData: DeleteDataImpl<SubmissionCoarNotifyConfig>;\n  private patchData: PatchDataImpl<SubmissionCoarNotifyConfig>;\n  private comparator: ChangeAnalyzer<SubmissionCoarNotifyConfig>;\n\n  constructor(\n    protected requestService: RequestService,\n    protected rdbService: RemoteDataBuildService,\n    protected objectCache: ObjectCacheService,\n    protected halService: HALEndpointService,\n    protected notificationsService: NotificationsService,\n  ) {\n    super('submissioncoarnotifyconfigs', requestService, rdbService, objectCache, halService);\n\n    this.findAllData = new FindAllDataImpl(this.linkPath, requestService, rdbService, objectCache, halService, this.responseMsToLive);\n    this.deleteData = new DeleteDataImpl(this.linkPath, requestService, rdbService, objectCache, halService, notificationsService, this.responseMsToLive, this.constructIdEndpoint);\n    this.patchData = new PatchDataImpl(this.linkPath, requestService, rdbService, objectCache, halService, this.comparator, this.responseMsToLive, this.constructIdEndpoint);\n    this.createData = new CreateDataImpl(this.linkPath, requestService, rdbService, objectCache, halService, notificationsService, this.responseMsToLive);\n  }\n\n\n  create(object: SubmissionCoarNotifyConfig, ...params: RequestParam[]): Observable<RemoteData<SubmissionCoarNotifyConfig>> {\n    return this.createData.create(object, ...params);\n  }\n\n  patch(object: SubmissionCoarNotifyConfig, operations: Operation[]): Observable<RemoteData<SubmissionCoarNotifyConfig>> {\n    return this.patchData.patch(object, operations);\n  }\n\n  update(object: SubmissionCoarNotifyConfig): Observable<RemoteData<SubmissionCoarNotifyConfig>> {\n    return this.patchData.update(object);\n  }\n\n  commitUpdates(method?: RestRequestMethod): void {\n    return this.patchData.commitUpdates(method);\n  }\n\n  createPatchFromCache(object: SubmissionCoarNotifyConfig): Observable<Operation[]> {\n    return this.patchData.createPatchFromCache(object);\n  }\n\n  findAll(options?: FindListOptions, useCachedVersionIfAvailable?: boolean, reRequestOnStale?: boolean, ...linksToFollow: FollowLinkConfig<SubmissionCoarNotifyConfig>[]): Observable<RemoteData<PaginatedList<SubmissionCoarNotifyConfig>>> {\n    return this.findAllData.findAll(options, useCachedVersionIfAvailable, reRequestOnStale, ...linksToFollow);\n  }\n\n\n  public delete(objectId: string, copyVirtualMetadata?: string[]): Observable<RemoteData<NoContent>> {\n    return this.deleteData.delete(objectId, copyVirtualMetadata);\n  }\n\n  public deleteByHref(href: string, copyVirtualMetadata?: string[]): Observable<RemoteData<NoContent>> {\n    return this.deleteData.deleteByHref(href, copyVirtualMetadata);\n  }\n\n  public invoke(serviceName: string, serviceId: string, files: File[]): Observable<RemoteData<SubmissionCoarNotifyConfig>> {\n    const requestId = this.requestService.generateRequestId();\n    this.getBrowseEndpoint().pipe(\n      take(1),\n      map((endpoint: string) => new URLCombiner(endpoint, serviceName, 'submissioncoarnotifyconfigmodel', serviceId).toString()),\n      map((endpoint: string) => {\n        const body = this.getInvocationFormData(files);\n        return new MultipartPostRequest(requestId, endpoint, body);\n      }),\n    ).subscribe((request: RestRequest) => this.requestService.send(request));\n\n    return this.rdbService.buildFromRequestUUID<SubmissionCoarNotifyConfig>(requestId);\n  }\n\n  private getInvocationFormData(files: File[]): FormData {\n    const form: FormData = new FormData();\n    files.forEach((file: File) => {\n      form.append('file', file);\n    });\n    return form;\n  }\n}\n"],"names":["map","take","RemoteDataBuildService","ObjectCacheService","CreateDataImpl","DeleteDataImpl","FindAllDataImpl","IdentifiableDataService","PatchDataImpl","MultipartPostRequest","RequestService","HALEndpointService","URLCombiner","NotificationsService","CoarNotifyConfigDataService","constructor","requestService","rdbService","objectCache","halService","notificationsService","findAllData","linkPath","responseMsToLive","deleteData","constructIdEndpoint","patchData","comparator","createData","create","object","params","patch","operations","update","commitUpdates","method","createPatchFromCache","findAll","options","useCachedVersionIfAvailable","reRequestOnStale","linksToFollow","delete","objectId","copyVirtualMetadata","deleteByHref","href","invoke","serviceName","serviceId","files","requestId","generateRequestId","getBrowseEndpoint","pipe","endpoint","toString","body","getInvocationFormData","subscribe","request","send","buildFromRequestUUID","form","FormData","forEach","file","append","i0","ɵɵinject","i1","i2","i3","i4","i5","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}